import cv2 as cv
import numpy as np
from Crown_detection import ToHans as detectCrowns

answers = np.array(
        [[[2,1,0,0,0],
          [0,0,1,0,0],
          [0,1,0,0,1],
          [0,1,0,1,0],
          [0,0,1,0,1]],
         
         [[0,0,0,0,0],
          [0,1,0,0,0],
          [0,0,2,0,0],
          [0,2,0,0,0],
          [0,0,0,0,1]],
         
         [[1,0,2,2,0],
          [0,1,0,0,0],
          [0,0,0,2,0],
          [0,1,0,0,0],
          [0,1,0,1,0]],
         
         [[1,0,0,0,0],
          [0,1,0,0,0],
          [2,0,0,0,0],
          [2,3,0,1,0],
          [0,0,0,0,1]],
         
         [[0,1,0,0,0],
          [0,0,1,0,1],
          [0,0,0,1,0],
          [0,1,0,0,1],
          [0,0,0,0,0]],
         
         [[2,3,0,1,0],
          [0,2,0,0,0],
          [0,0,1,0,0],
          [2,1,0,0,0],
          [0,0,0,0,1]],
         
         [[0,0,0,0,0],
          [1,0,0,0,0],
          [1,0,0,0,1],
          [0,0,1,0,1],
          [1,0,0,0,0]],
         
         [[2,3,0,1,0],
          [0,2,0,0,0],
          [0,0,1,0,0],
          [2,1,0,0,0],
          [0,0,0,0,1]],
         
         [[2,0,1,0,1],
          [0,1,0,0,0],
          [1,0,0,0,0],
          [1,0,0,0,0],
          [1,0,0,0,0]],
         
         [[1,0,0,0,0],
          [0,1,0,1,0],
          [0,0,0,0,0],
          [0,0,1,0,0],
          [3,2,0,2,0]],
         
         [[0,0,1,0,0],
          [0,0,0,2,1],
          [0,0,2,0,0],
          [0,0,0,1,0],
          [0,1,0,1,0]],
         
         [[1,0,0,0,0],
          [0,0,1,0,0],
          [0,1,0,0,0],
          [0,1,0,1,2],
          [0,0,0,1,0]],
         
         [[0,1,0,0,0],
          [0,0,2,0,0],
          [0,0,0,1,0],
          [0,1,0,0,1],
          [0,2,2,0,0]],
         
         [[0,0,1,0,0],
          [1,2,0,0,1],
          [0,1,0,0,0],
          [0,0,0,0,1],
          [1,1,0,0,0]],
         
         [[0,1,1,1,0],
          [0,0,0,0,1],
          [1,0,0,0,0],
          [0,0,0,0,0],
          [0,0,0,0,0]]])

imgList = ["7.jpg","12.jpg","14.jpg","19.jpg","22.jpg","28.jpg","30.jpg","32.jpg","33.jpg","35.jpg","45.jpg","46.jpg","57.jpg","62.jpg","68.jpg"]

n=10
imgName = imgList[n]

img = cv.imread("testCropped/"+imgName,1)
result = detectCrowns(img)

TP = 0
FP = 0
FN = 0

for y in range(5):
    for x in range(5):

        answer = answers[n,y,x]
        guess = result[y,x]
        if answer > 0 or guess > 0:
            if answer == guess:
                TP += answer
            else:
                dif = answer-guess
                if dif<0:
                    FP -=dif
                else:
                    FN +=dif
print(result)
print("\n",imgName,"\nTP: ",TP,"\nFP: ",FP,"\nFN: ",FN)